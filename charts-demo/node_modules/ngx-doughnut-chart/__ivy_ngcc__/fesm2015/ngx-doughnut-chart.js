import { Injectable, NgModule, Component, Input, defineInjectable } from '@angular/core';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';

function NgxDonutChartComponent__svg_path_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵelement(0, "path", 6);
} if (rf & 2) {
    const arc_r3 = ctx.$implicit;
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵattribute("d", arc_r3.d)("stroke", arc_r3.color)("stroke-width", ctx_r0.thickness);
} }
const _c0 = function (a0, a1) { return { "width": a0, "height": a1 }; };
function NgxDonutChartComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵnamespaceSVG();
    ɵngcc0.ɵɵnamespaceHTML();
    ɵngcc0.ɵɵelementStart(0, "div", 7);
    ɵngcc0.ɵɵelement(1, "div", 8);
    ɵngcc0.ɵɵelement(2, "div", 9);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction2(4, _c0, ctx_r1.width, ctx_r1.height));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngClass", ctx_r1.totalClass)("innerText", ctx_r1.total);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("innerText", ctx_r1.title);
} }
const _c1 = function (a0) { return { "background-color": a0 }; };
function NgxDonutChartComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 10);
    ɵngcc0.ɵɵelement(1, "div", 11);
    ɵngcc0.ɵɵelement(2, "div", 12);
    ɵngcc0.ɵɵelement(3, "div", 13);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const item_r4 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction1(3, _c1, item_r4.color));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("innerText", item_r4.label);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("innerText", item_r4.percentage);
} }
const _c2 = function (a0) { return { "width": a0 }; };
class NgxDonutChartService {
    constructor() { }
}
NgxDonutChartService.ɵfac = function NgxDonutChartService_Factory(t) { return new (t || NgxDonutChartService)(); };
NgxDonutChartService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: NgxDonutChartService, factory: NgxDonutChartService.ɵfac, providedIn: 'root' });
/** @nocollapse */
NgxDonutChartService.ctorParameters = () => [];
/** @nocollapse */ NgxDonutChartService.ngInjectableDef = defineInjectable({ factory: function NgxDonutChartService_Factory() { return new NgxDonutChartService(); }, token: NgxDonutChartService, providedIn: "root" });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxDonutChartService, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return []; }, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class NgxDonutChartComponent {
    constructor() { }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.setDefaults();
        /** @type {?} */
        let angles = this._calculateAngles(this.data);
        /** @type {?} */
        let ArchPoints = this._calculateArcPoints(this.data);
    }
    /**
     * @return {?}
     */
    setDefaults() {
        this.arcs = [];
        this.radius = this.radius || 200;
        this.margin = this.margin || 10;
        this.thickness = this.thickness || 8;
        this.totalClass = this.totalClass || 'c-donutchart__title';
        this.origin = {
            x: this.radius,
            y: this.radius,
        };
        this.width = ((2 * this.radius) + (2 * this.margin)) + 'px';
        this.height = ((2 * this.radius) + (2 * this.margin)) + 'px';
    }
    /**
     * @param {?} data
     * @return {?}
     */
    _calculateArcPoints(data) {
        /** @type {?} */
        let archPoints = [];
        archPoints.push({
            x: this.radius,
            y: 0,
        });
        /** @type {?} */
        let startAngle = 0;
        /** @type {?} */
        let endAngle;
        /** @type {?} */
        let startX = this.origin.x;
        /** @type {?} */
        let startY = this.origin.y;
        for (let item of data) {
            endAngle = (startAngle + item.angle) % 360;
            startAngle += 8;
            /** @type {?} */
            let arc = this._describeArc(startX, startY, this.radius, startAngle, endAngle, item.color);
            this.arcs.push(arc);
            startAngle = endAngle;
        }
    }
    /**
     * @param {?} x
     * @param {?} y
     * @param {?} radius
     * @param {?} startAngle
     * @param {?} endAngle
     * @param {?} color
     * @return {?}
     */
    _describeArc(x, y, radius, startAngle, endAngle, color) {
        /** @type {?} */
        let start = this._polarToCartesian(x, y, radius, startAngle);
        /** @type {?} */
        let end = this._polarToCartesian(x, y, radius, endAngle);
        /** @type {?} */
        let arcSweep = endAngle - startAngle <= 180 ? "0" : "1";
        /** @type {?} */
        let d = [
            "M", start.x, start.y,
            "A", radius, radius, 0, arcSweep, 1, end.x, end.y,
        ].join(" ");
        return {
            d: d,
            end: end,
            color: color,
        };
    }
    /**
     * @param {?} data
     * @return {?}
     */
    _calculateAngles(data) {
        /** @type {?} */
        let angles = [];
        /** @type {?} */
        let total = this._getTotal(data);
        this.total = total;
        for (let i = 0; i < data.length; i++) {
            /** @type {?} */
            let dataItem = data[i];
            /** @type {?} */
            let angle = (dataItem.value / total) * 360.0;
            dataItem.angle = angle;
            dataItem.percentage = ((dataItem.value / total) * 100.0).toFixed(2) + '%';
            angles.push(angle);
        }
        return angles;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    _getTotal(data) {
        return data.reduce((a, b) => ({ value: a.value + b.value })).value;
    }
    /**
     * @param {?} centerX
     * @param {?} centerY
     * @param {?} radius
     * @param {?} angleInDegrees
     * @return {?}
     */
    _polarToCartesian(centerX, centerY, radius, angleInDegrees) {
        /** @type {?} */
        let angleInRadians = (angleInDegrees) * Math.PI / 180.0;
        return {
            x: centerX + (radius * Math.cos(angleInRadians)) + this.margin,
            y: centerY + (radius * Math.sin(angleInRadians)) + this.margin,
        };
    }
}
NgxDonutChartComponent.ɵfac = function NgxDonutChartComponent_Factory(t) { return new (t || NgxDonutChartComponent)(); };
NgxDonutChartComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: NgxDonutChartComponent, selectors: [["ngx-donut-chart"]], inputs: { radius: "radius", margin: "margin", thickness: "thickness", totalClass: "totalClass", data: "data", title: "title" }, decls: 6, vars: 10, consts: [[1, "c-donutchart", 3, "ngStyle"], ["xmlns", "http://www.w3.org/2000/svg", 3, "ngStyle"], ["fill", "transparent", "fill-opacity", "0.5", 4, "ngFor", "ngForOf"], ["class", "c-donutchart__text", 3, "ngStyle", 4, "ngIf"], [1, "c-donutchart__legends"], ["class", "c-donutchart__legend", 4, "ngFor", "ngForOf"], ["fill", "transparent", "fill-opacity", "0.5"], [1, "c-donutchart__text", 3, "ngStyle"], [3, "ngClass", "innerText"], [3, "innerText"], [1, "c-donutchart__legend"], [1, "c-donutchart__legend-bar", 3, "ngStyle"], [1, "c-donutchart__legend-title", 3, "innerText"], [1, "c-donutchart__legend-percentage", 3, "innerText"]], template: function NgxDonutChartComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵnamespaceSVG();
        ɵngcc0.ɵɵelementStart(1, "svg", 1);
        ɵngcc0.ɵɵtemplate(2, NgxDonutChartComponent__svg_path_2_Template, 1, 3, "path", 2);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(3, NgxDonutChartComponent_div_3_Template, 3, 7, "div", 3);
        ɵngcc0.ɵɵnamespaceHTML();
        ɵngcc0.ɵɵelementStart(4, "div", 4);
        ɵngcc0.ɵɵtemplate(5, NgxDonutChartComponent_div_5_Template, 4, 5, "div", 5);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction1(5, _c2, ctx.width));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngStyle", ɵngcc0.ɵɵpureFunction2(7, _c0, ctx.width, ctx.height));
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.arcs);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.title);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.data);
    } }, directives: [ɵngcc1.NgStyle, ɵngcc1.NgForOf, ɵngcc1.NgIf, ɵngcc1.NgClass], styles: [".c-donutchart[_ngcontent-%COMP%]{position:relative}.c-donutchart[_ngcontent-%COMP%]   .c-donutchart__text[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:flex;flex-flow:column;align-items:center;justify-content:center}.c-donutchart[_ngcontent-%COMP%]   .c-donutchart__title[_ngcontent-%COMP%]{font-size:40px}.c-donutchart[_ngcontent-%COMP%]   .c-donutchart__legends[_ngcontent-%COMP%]{display:flex;justify-content:center}.c-donutchart[_ngcontent-%COMP%]   .c-donutchart__legend[_ngcontent-%COMP%]{display:flex;flex-flow:column;align-items:center;margin:16px 8px}.c-donutchart[_ngcontent-%COMP%]   .c-donutchart__legend-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:8px;width:40px;height:8px;border-radius:4px;background-color:#dc143c}.c-donutchart[_ngcontent-%COMP%]   .c-donutchart__legend-percentage[_ngcontent-%COMP%], .c-donutchart[_ngcontent-%COMP%]   .c-donutchart__legend-title[_ngcontent-%COMP%]{text-align:center}"] });
/** @nocollapse */
NgxDonutChartComponent.ctorParameters = () => [];
NgxDonutChartComponent.propDecorators = {
    data: [{ type: Input }],
    radius: [{ type: Input }],
    margin: [{ type: Input }],
    title: [{ type: Input }],
    thickness: [{ type: Input }],
    totalClass: [{ type: Input }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxDonutChartComponent, [{
        type: Component,
        args: [{
                selector: 'ngx-donut-chart',
                template: `<div
  class="c-donutchart"
  [ngStyle]="{'width': width}">
  <svg
    [ngStyle]="{'width': width, 'height': height}"
    xmlns="http://www.w3.org/2000/svg">
    <!-- <path [attr.d]="pathD" stroke="black" fill="transparent" stroke-width="8" fill-opacity="0.5"/> -->
    <path
      *ngFor="let arc of arcs"
      [attr.d]="arc.d"
      [attr.stroke]="arc.color"
      fill="transparent"
      [attr.stroke-width]="thickness"
      fill-opacity="0.5"/>
  </svg>

  <div
    class="c-donutchart__text"
    *ngIf="title"
    [ngStyle]="{'width': width, 'height': height}">
    <div
      [ngClass]="totalClass"
      [innerText]="total"></div>
    <div [innerText]="title"></div>
  </div>

  <div class="c-donutchart__legends">
    <div
      class="c-donutchart__legend"
      *ngFor="let item of data">
      <div
        class="c-donutchart__legend-bar"
        [ngStyle]="{'background-color': item.color}">
      </div>

      <div
        class="c-donutchart__legend-title"
        [innerText]="item.label">
      </div>

      <div
        class="c-donutchart__legend-percentage"
        [innerText]="item.percentage">
      </div>
    </div>
  </div>
</div>
`,
                styles: [`.c-donutchart{position:relative}.c-donutchart .c-donutchart__text{position:absolute;top:0;left:0;display:flex;flex-flow:column;align-items:center;justify-content:center}.c-donutchart .c-donutchart__title{font-size:40px}.c-donutchart .c-donutchart__legends{display:flex;justify-content:center}.c-donutchart .c-donutchart__legend{display:flex;flex-flow:column;align-items:center;margin:16px 8px}.c-donutchart .c-donutchart__legend-bar{display:flex;align-items:center;justify-content:center;margin-bottom:8px;width:40px;height:8px;border-radius:4px;background-color:#dc143c}.c-donutchart .c-donutchart__legend-percentage,.c-donutchart .c-donutchart__legend-title{text-align:center}`]
            }]
    }], function () { return []; }, { radius: [{
            type: Input
        }], margin: [{
            type: Input
        }], thickness: [{
            type: Input
        }], totalClass: [{
            type: Input
        }], data: [{
            type: Input
        }], title: [{
            type: Input
        }] }); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class NgxDonutChartModule {
}
NgxDonutChartModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: NgxDonutChartModule });
NgxDonutChartModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function NgxDonutChartModule_Factory(t) { return new (t || NgxDonutChartModule)(); }, imports: [[
            CommonModule
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NgxDonutChartModule, { declarations: function () { return [NgxDonutChartComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [NgxDonutChartComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(NgxDonutChartModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule
                ],
                declarations: [NgxDonutChartComponent],
                exports: [NgxDonutChartComponent]
            }]
    }], null, null); })();

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { NgxDonutChartService, NgxDonutChartComponent, NgxDonutChartModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWRvdWdobnV0LWNoYXJ0LmpzIiwic291cmNlcyI6WyJuZ3gtZG91Z2hudXQtY2hhcnQvbGliL25neC1kb251dC1jaGFydC5zZXJ2aWNlLnRzIiwibmd4LWRvdWdobnV0LWNoYXJ0L2xpYi9uZ3gtZG9udXQtY2hhcnQuY29tcG9uZW50LnRzIiwibmd4LWRvdWdobnV0LWNoYXJ0L2xpYi9uZ3gtZG9udXQtY2hhcnQubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxpQ0FPRTtTQUFpQjs7Z0JBTGxCLFVBQVUsU0FBQyxrQkFDVixVQUFVLEVBQUUsTUFBTTtPQUNuQjs7Ozs7Ozs7O01DSkQ7WUFrRUUsaUJBQWlCO3VDQUVqQjtPQUFRLGFBQ04sSUFBSSxDQUFDO0NBQVcsRUFBRSxDQUFDO0dBQ25CLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQztVQUFnQixDQUFDLElBQUk7QUFBQyxJQUFJLENBQUMsQ0FBQyxrQ0FDOUM7Q0FBSSxVQUFVLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUN0RDtDQUVELFdBQVc7QUFDVCxJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxTQUNmLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sSUFBSSxHQUFHLENBQUMsU0FDakMsSUFBSSxDQUFDLE1BQU07QUFBRyxJQUFJLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztFQUNoQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDLFNBQ3JDO0VBQUksQ0FBQztTQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxxQkFBcUIsQ0FBQyxTQUMzRDtBQUFJLENBQUMsTUFBTSxHQUFHLGNBQ1osQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLGNBQ2QsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNO0tBQ2YsQ0FBQyxTQUNGLElBQUksQ0FBQyxLQUFL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Q29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE5neERvbnV0Q2hhcnRTZXJ2aWNlIHtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25neC1kb251dC1jaGFydCcsXG4gIHRlbXBsYXRlOiBgPGRpdlxuICBjbGFzcz1cImMtZG9udXRjaGFydFwiXG4gIFtuZ1N0eWxlXT1cInsnd2lkdGgnOiB3aWR0aH1cIj5cbiAgPHN2Z1xuICAgIFtuZ1N0eWxlXT1cInsnd2lkdGgnOiB3aWR0aCwgJ2hlaWdodCc6IGhlaWdodH1cIlxuICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAgICA8IS0tIDxwYXRoIFthdHRyLmRdPVwicGF0aERcIiBzdHJva2U9XCJibGFja1wiIGZpbGw9XCJ0cmFuc3BhcmVudFwiIHN0cm9rZS13aWR0aD1cIjhcIiBmaWxsLW9wYWNpdHk9XCIwLjVcIi8+IC0tPlxuICAgIDxwYXRoXG4gICAgICAqbmdGb3I9XCJsZXQgYXJjIG9mIGFyY3NcIlxuICAgICAgW2F0dHIuZF09XCJhcmMuZFwiXG4gICAgICBbYXR0ci5zdHJva2VdPVwiYXJjLmNvbG9yXCJcbiAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXG4gICAgICBbYXR0ci5zdHJva2Utd2lkdGhdPVwidGhpY2tuZXNzXCJcbiAgICAgIGZpbGwtb3BhY2l0eT1cIjAuNVwiLz5cbiAgPC9zdmc+XG5cbiAgPGRpdlxuICAgIGNsYXNzPVwiYy1kb251dGNoYXJ0X190ZXh0XCJcbiAgICAqbmdJZj1cInRpdGxlXCJcbiAgICBbbmdTdHlsZV09XCJ7J3dpZHRoJzogd2lkdGgsICdoZWlnaHQnOiBoZWlnaHR9XCI+XG4gICAgPGRpdlxuICAgICAgW25nQ2xhc3NdPVwidG90YWxDbGFzc1wiXG4gICAgICBbaW5uZXJUZXh0XT1cInRvdGFsXCI+PC9kaXY+XG4gICAgPGRpdiBbaW5uZXJUZXh0XT1cInRpdGxlXCI+PC9kaXY+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJjLWRvbnV0Y2hhcnRfX2xlZ2VuZHNcIj5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cImMtZG9udXRjaGFydF9fbGVnZW5kXCJcbiAgICAgICpuZ0Zvcj1cImxldCBpdGVtIG9mIGRhdGFcIj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJjLWRvbnV0Y2hhcnRfX2xlZ2VuZC1iYXJcIlxuICAgICAgICBbbmdTdHlsZV09XCJ7J2JhY2tncm91bmQtY29sb3InOiBpdGVtLmNvbG9yfVwiPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJjLWRvbnV0Y2hhcnRfX2xlZ2VuZC10aXRsZVwiXG4gICAgICAgIFtpbm5lclRleHRdPVwiaXRlbS5sYWJlbFwiPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJjLWRvbnV0Y2hhcnRfX2xlZ2VuZC1wZXJjZW50YWdlXCJcbiAgICAgICAgW2lubmVyVGV4dF09XCJpdGVtLnBlcmNlbnRhZ2VcIj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuYCxcbiAgc3R5bGVzOiBbYC5jLWRvbnV0Y2hhcnR7cG9zaXRpb246cmVsYXRpdmV9LmMtZG9udXRjaGFydCAuYy1kb251dGNoYXJ0X190ZXh0e3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDtkaXNwbGF5OmZsZXg7ZmxleC1mbG93OmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uYy1kb251dGNoYXJ0IC5jLWRvbnV0Y2hhcnRfX3RpdGxle2ZvbnQtc2l6ZTo0MHB4fS5jLWRvbnV0Y2hhcnQgLmMtZG9udXRjaGFydF9fbGVnZW5kc3tkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uYy1kb251dGNoYXJ0IC5jLWRvbnV0Y2hhcnRfX2xlZ2VuZHtkaXNwbGF5OmZsZXg7ZmxleC1mbG93OmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luOjE2cHggOHB4fS5jLWRvbnV0Y2hhcnQgLmMtZG9udXRjaGFydF9fbGVnZW5kLWJhcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luLWJvdHRvbTo4cHg7d2lkdGg6NDBweDtoZWlnaHQ6OHB4O2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQtY29sb3I6I2RjMTQzY30uYy1kb251dGNoYXJ0IC5jLWRvbnV0Y2hhcnRfX2xlZ2VuZC1wZXJjZW50YWdlLC5jLWRvbnV0Y2hhcnQgLmMtZG9udXRjaGFydF9fbGVnZW5kLXRpdGxle3RleHQtYWxpZ246Y2VudGVyfWBdXG59KVxuZXhwb3J0IGNsYXNzIE5neERvbnV0Q2hhcnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBkYXRhOiBbe2FueX1dO1xuICBASW5wdXQoKSByYWRpdXM6IG51bWJlcjtcbiAgQElucHV0KCkgbWFyZ2luOiBudW1iZXI7XG4gIEBJbnB1dCgpIHRpdGxlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHRoaWNrbmVzczogbnVtYmVyO1xuICBASW5wdXQoKSB0b3RhbENsYXNzOiBzdHJpbmc7XG4gIHdpZHRoOiBzdHJpbmc7XG4gIGhlaWdodDogc3RyaW5nO1xuICBvcmlnaW46IHt4OiBudW1iZXIsIHk6IG51bWJlcn07XG4gIGFyY3M6IGFueVtdO1xuICB0b3RhbDogbnVtYmVyO1xuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuc2V0RGVmYXVsdHMoKTtcbiAgICBsZXQgYW5nbGVzID0gdGhpcy5fY2FsY3VsYXRlQW5nbGVzKHRoaXMuZGF0YSk7XG4gICAgbGV0IEFyY2hQb2ludHMgPSB0aGlzLl9jYWxjdWxhdGVBcmNQb2ludHModGhpcy5kYXRhKTtcbiAgfVxuXG4gIHNldERlZmF1bHRzKCkge1xuICAgIHRoaXMuYXJjcyA9IFtdO1xuICAgIHRoaXMucmFkaXVzID0gdGhpcy5yYWRpdXMgfHwgMjAwO1xuICAgIHRoaXMubWFyZ2luID0gdGhpcy5tYXJnaW4gfHwgMTA7XG4gICAgdGhpcy50aGlja25lc3MgPSB0aGlzLnRoaWNrbmVzcyB8fCA4O1xuICAgIHRoaXMudG90YWxDbGFzcyA9IHRoaXMudG90YWxDbGFzcyB8fCAnYy1kb251dGNoYXJ0X190aXRsZSc7XG4gICAgdGhpcy5vcmlnaW4gPSB7XG4gICAgICB4OiB0aGlzLnJhZGl1cyxcbiAgICAgIHk6IHRoaXMucmFkaXVzLFxuICAgIH07XG4gICAgdGhpcy53aWR0aCA9ICgoMiAqIHRoaXMucmFkaXVzKSArICgyICogdGhpcy5tYXJnaW4pKSArICdweCc7XG4gICAgdGhpcy5oZWlnaHQgPSAoKDIgKiB0aGlzLnJhZGl1cykgKyAoMiAqIHRoaXMubWFyZ2luKSkgKyAncHgnO1xuICB9XG5cbiAgX2NhbGN1bGF0ZUFyY1BvaW50cyhkYXRhKSB7XG4gICAgbGV0IGFyY2hQb2ludHMgPSBbXTtcbiAgICBhcmNoUG9pbnRzLnB1c2goe1xuICAgICAgeDogdGhpcy5yYWRpdXMsXG4gICAgICB5OiAwLFxuICAgIH0pO1xuXG4gICAgbGV0IHN0YXJ0QW5nbGUgPSAwO1xuICAgIGxldCBlbmRBbmdsZTtcbiAgICBsZXQgc3RhcnRYID0gdGhpcy5vcmlnaW4ueDtcbiAgICBsZXQgc3RhcnRZID0gdGhpcy5vcmlnaW4ueTtcblxuICAgIGZvciAobGV0IGl0ZW0gb2YgZGF0YSkge1xuICAgICAgZW5kQW5nbGUgPSAoc3RhcnRBbmdsZSArIGl0ZW0uYW5nbGUpICUgMzYwO1xuICAgICAgc3RhcnRBbmdsZSArPSA4O1xuICAgICAgLy8gZW5kQW5nbGUgLT01O1xuXG4gICAgICBsZXQgYXJjID0gdGhpcy5fZGVzY3JpYmVBcmMoc3RhcnRYLCBzdGFydFksIHRoaXMucmFkaXVzLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSwgaXRlbS5jb2xvcik7XG4gICAgICB0aGlzLmFyY3MucHVzaChhcmMpO1xuXG4gICAgICBzdGFydEFuZ2xlID0gZW5kQW5nbGU7XG4gICAgfVxuICB9XG5cbiAgX2Rlc2NyaWJlQXJjKHgsIHksIHJhZGl1cywgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGNvbG9yKXtcbiAgICBsZXQgc3RhcnQgPSB0aGlzLl9wb2xhclRvQ2FydGVzaWFuKHgsIHksIHJhZGl1cywgc3RhcnRBbmdsZSk7XG4gICAgbGV0IGVuZCA9IHRoaXMuX3BvbGFyVG9DYXJ0ZXNpYW4oeCwgeSwgcmFkaXVzLCBlbmRBbmdsZSk7XG4gICAgbGV0IGFyY1N3ZWVwID0gZW5kQW5nbGUgLSBzdGFydEFuZ2xlIDw9IDE4MCA/IFwiMFwiIDogXCIxXCI7XG5cbiAgICBsZXQgZCA9IFtcbiAgICAgICAgXCJNXCIsIHN0YXJ0LngsIHN0YXJ0LnksXG4gICAgICAgIFwiQVwiLCByYWRpdXMsIHJhZGl1cywgMCwgYXJjU3dlZXAsIDEsIGVuZC54LCBlbmQueSxcbiAgICAgICAgLy8gXCJMXCIsIHgseSxcbiAgICAgICAgLy8gXCJMXCIsIHN0YXJ0LngsIHN0YXJ0LnlcbiAgICBdLmpvaW4oXCIgXCIpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGQ6IGQsXG4gICAgICBlbmQ6IGVuZCxcbiAgICAgIGNvbG9yOiBjb2xvcixcbiAgICB9O1xuICB9XG5cbiAgX2NhbGN1bGF0ZUFuZ2xlcyhkYXRhKSB7XG4gICAgbGV0IGFuZ2xlcyA9IFtdO1xuICAgIGxldCB0b3RhbCA9IHRoaXMuX2dldFRvdGFsKGRhdGEpO1xuICAgIHRoaXMudG90YWwgPSB0b3RhbDtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGRhdGFJdGVtID0gZGF0YVtpXTtcbiAgICAgIGxldCBhbmdsZSA9IChkYXRhSXRlbS52YWx1ZSAvIHRvdGFsKSAqIDM2MC4wO1xuICAgICAgZGF0YUl0ZW0uYW5nbGUgPSBhbmdsZTtcbiAgICAgIGRhdGFJdGVtLnBlcmNlbnRhZ2UgPSAoKGRhdGFJdGVtLnZhbHVlIC8gdG90YWwpICogMTAwLjApLnRvRml4ZWQoMikgKyAnJSc7XG4gICAgICBhbmdsZXMucHVzaChhbmdsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFuZ2xlcztcbiAgfVxuXG4gIF9nZXRUb3RhbChkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGEucmVkdWNlKChhLCBiKSA9PiAoeyB2YWx1ZSA6IGEudmFsdWUgKyBiLnZhbHVlIH0pKS52YWx1ZTtcbiAgfVxuXG4gIF9wb2xhclRvQ2FydGVzaWFuKGNlbnRlclgsIGNlbnRlclksIHJhZGl1cywgYW5nbGVJbkRlZ3JlZXMpIHtcbiAgICBsZXQgYW5nbGVJblJhZGlhbnMgPSAoYW5nbGVJbkRlZ3JlZXMpICogTWF0aC5QSSAvIDE4MC4wO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IGNlbnRlclggKyAocmFkaXVzICogTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpKSArIHRoaXMubWFyZ2luLFxuICAgICAgeTogY2VudGVyWSArIChyYWRpdXMgKiBNYXRoLnNpbihhbmdsZUluUmFkaWFucykpICsgdGhpcy5tYXJnaW4sXG4gICAgfTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuaW1wb3J0IHsgTmd4RG9udXRDaGFydENvbXBvbmVudCB9IGZyb20gJy4vbmd4LWRvbnV0LWNoYXJ0LmNvbXBvbmVudCc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbTmd4RG9udXRDaGFydENvbXBvbmVudF0sXG4gIGV4cG9ydHM6IFtOZ3hEb251dENoYXJ0Q29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBOZ3hEb251dENoYXJ0TW9kdWxlIHsgfVxuIl19